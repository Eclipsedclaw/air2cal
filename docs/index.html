<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Air2Cal Flight Calendar Generator</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Luxon for timezone handling -->
  <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js" defer></script>
  <!-- Fuse.js for client-side fuzzy searching -->
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.min.js" defer></script>
  <script src="script.js" defer></script>
</head>
<body>
  <main class="container">
    <h1>Air2Cal Flight Calendar Generator</h1>
    <p>Click "Add flight" to enter flight details. Start typing an airport code, city or airport name and pick from suggestions.</p>

    <div id="flights" aria-live="polite"></div>

    <div class="actions">
      <button id="addFlight">+ Add flight</button>
      <button id="generate">Generate .ics</button>
      <a id="downloadLink" style="display:none"></a>
    </div>

    <details style="margin-top:12px">
      <summary>Notes</summary>
      <ul>
        <li>Everything runs in your browser ‚Äî no server required.</li>
        <li>Input uses a calendar for dates and a native time picker with 15-minute steps.</li>
      </ul>
    </details>
  </main>

  <!-- Modal container (pop-out form) -->
  <div id="modalOverlay" class="modal-overlay" aria-hidden="true" style="display:none">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h2 id="modalTitle">Add Flight</h2>

      <form id="flightForm" autocomplete="off">
        <label>Flight number (e.g., HA850, NH976)
          <input type="text" id="flight_number" required />
        </label>

        <label>Passenger name
          <input type="text" id="passenger_name" required />
        </label>

        <fieldset class="section">
          <legend>üõ´ DEPARTURE</legend>

          <label>Departure airport (code, city or name)
            <input type="text" id="departure_airport" class="airport-input" maxlength="64" placeholder="e.g., JFK, New York, John F. Kennedy" />
            <div class="suggestions" id="departure_suggestions" role="listbox" aria-hidden="true"></div>
          </label>

          <label>Departure timezone (auto-filled if known)
            <input type="text" id="departure_timezone" placeholder="e.g., America/New_York" />
          </label>

          <div class="row">
            <label style="flex:1">Departure date
              <input type="date" id="departure_date" />
            </label>

            <label style="flex:1">Departure time
              <input type="time" id="departure_time" step="900" aria-label="Departure time" />
            </label>
          </div>
        </fieldset>

        <fieldset class="section">
          <legend>üõ¨ ARRIVAL</legend>

          <label>Arrival airport (code, city or name)
            <input type="text" id="arrival_airport" class="airport-input" maxlength="64" placeholder="e.g., HNL, Honolulu, Daniel K. Inouye" />
            <div class="suggestions" id="arrival_suggestions" role="listbox" aria-hidden="true"></div>
          </label>

          <label>Arrival timezone (auto-filled if known)
            <input type="text" id="arrival_timezone" placeholder="e.g., Pacific/Honolulu" />
          </label>

          <div class="row">
            <label style="flex:1">Arrival date
              <input type="date" id="arrival_date" />
            </label>

            <label style="flex:1">Arrival time
              <input type="time" id="arrival_time" step="900" aria-label="Arrival time" />
            </label>
          </div>
        </fieldset>

        <fieldset class="section">
          <legend>üìù ADDITIONAL DETAILS (optional)</legend>

          <label>Seat assignment
            <input type="text" id="seat" placeholder="12A" />
          </label>

          <label>Class (Economy/Business/First)
            <input type="text" id="class" placeholder="Economy" />
          </label>

          <label>Baggage allowance
            <input type="text" id="baggage" placeholder="1 carry-on, 1 checked" />
          </label>
        </fieldset>

        <div class="modal-actions">
          <button type="button" id="saveFlight">Save flight</button>
          <button type="button" id="saveAndAddAnother">Save & add another</button>
          <button type="button" id="cancelFlight" class="secondary">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</body>
</html>