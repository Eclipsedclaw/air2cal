<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Air2Cal â€” Flight â†’ .ics</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Luxon for timezone handling -->
  <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js" defer></script>
  <script src="script.js" defer></script>
</head>
<body>
  <main class="container">
    <h1>Air2Cal Flight Calendar Generator</h1>
    <p>Click "Add flight" to enter flight details. Airport suggestions (top airports) are loaded from airports.json.</p>

    <div id="flights" aria-live="polite"></div>

    <div class="actions">
      <button id="addFlight">+ Add flight</button>
      <button id="generate">Generate .ics</button>
      <a id="downloadLink" style="display:none"></a>
    </div>

    <details style="margin-top:12px">
      <summary>Notes</summary>
      <ul>
        <li>Everything runs in your browser â€” no server required.</li>
        <li>Date picker and native time input are used; time input is limited to 15-minute steps.</li>
      </ul>
    </details>
  </main>

  <!-- datalist for airport autocomplete (populated at runtime) -->
  <datalist id="airportList"></datalist>

  <!-- Modal -->
  <div id="modalOverlay" class="modal-overlay" aria-hidden="true" style="display:none">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h2 id="modalTitle">Add Flight</h2>

      <form id="flightForm" autocomplete="off">
        <label>Flight number (e.g., HA850, NH976)
          <input type="text" id="flight_number" required />
        </label>

        <label>Passenger name
          <input type="text" id="passenger_name" required />
        </label>

        <fieldset class="section">
          <legend>ğŸ›« DEPARTURE</legend>

          <label>Departure airport code or search
            <input type="text" id="departure_airport" list="airportList" maxlength="32" placeholder="e.g., JFK or 'JFK â€” New York'"/>
          </label>

          <label>Departure timezone (auto-filled if known)
            <input type="text" id="departure_timezone" placeholder="e.g., America/New_York" />
          </label>

          <div class="row">
            <label style="flex:1">Departure date
              <input type="date" id="departure_date" />
            </label>

            <label style="flex:1">Departure time
              <input type="time" id="departure_time" step="900" aria-label="Departure time" />
            </label>
          </div>
        </fieldset>

        <fieldset class="section">
          <legend>ğŸ›¬ ARRIVAL</legend>

          <label>Arrival airport code or search
            <input type="text" id="arrival_airport" list="airportList" maxlength="32" placeholder="e.g., HNL or 'HNL â€” Honolulu'"/>
          </label>

          <label>Arrival timezone (auto-filled if known)
            <input type="text" id="arrival_timezone" placeholder="e.g., Pacific/Honolulu" />
          </label>

          <div class="row">
            <label style="flex:1">Arrival date
              <input type="date" id="arrival_date" />
            </label>

            <label style="flex:1">Arrival time
              <input type="time" id="arrival_time" step="900" aria-label="Arrival time" />
            </label>
          </div>
        </fieldset>

        <fieldset class="section">
          <legend>ğŸ“ ADDITIONAL DETAILS (optional)</legend>

          <label>Seat assignment
            <input type="text" id="seat" placeholder="12A" />
          </label>

          <label>Class (Economy/Business/First)
            <input type="text" id="class" placeholder="Economy" />
          </label>

          <label>Baggage allowance
            <input type="text" id="baggage" placeholder="1 carry-on, 1 checked" />
          </label>
        </fieldset>

        <div class="modal-actions">
          <button type="button" id="saveFlight">Save flight</button>
          <button type="button" id="saveAndAddAnother">Save & add another</button>
          <button type="button" id="cancelFlight" class="secondary">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</body>
</html>